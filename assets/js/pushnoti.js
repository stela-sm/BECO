const msg__notificacoes = [
    // Notificações de "concurso"
    {
        title: "Participe do nosso concurso e ganhe prêmios incríveis!",
        content: "Inscreva-se agora e tenha a chance de ganhar prêmios incríveis no nosso concurso mensal!",
        tag: "concurso"
    },
    {
        title: "Não perca a chance de se destacar no nosso concurso!",
        content: "Participe e mostre seu talento. Os vencedores serão anunciados em breve!",
        tag: "concurso"
    },
    {
        title: "Nosso concurso está aberto! Inscreva-se já!",
        content: "As inscrições vão até o final do mês. Não fique de fora!",
        tag: "concurso"
    },
    {
        title: "Você já participou do concurso? Grandes prêmios te esperam!",
        content: "Entre na competição e mostre suas habilidades. Inscreva-se hoje!",
        tag: "concurso"
    },
    {
        title: "O concurso do mês está acontecendo, envie sua inscrição!",
        content: "Aproveite esta oportunidade e envie sua inscrição antes que seja tarde!",
        tag: "concurso"
    },
    {
        title: "Últimos dias para se inscrever no concurso!",
        content: "Não deixe para última hora. Inscreva-se já!",
        tag: "concurso"
    },
    {
        title: "Desafie-se: participe do nosso concurso!",
        content: "Teste suas habilidades e ganhe reconhecimento.",
        tag: "concurso"
    },
    {
        title: "O concurso deste mês está imperdível!",
        content: "Venha mostrar seu talento e concorra a prêmios incríveis.",
        tag: "concurso"
    },
    {
        title: "Prepare-se para o concurso, a competição está acirrada!",
        content: "Mostre sua criatividade e garanta sua participação.",
        tag: "concurso"
    },
    {
        title: "Concurso em destaque: venha participar!",
        content: "Participe do nosso concurso especial e surpreenda-se.",
        tag: "concurso"
    },

    // Notificações de "explorar"
    {
        title: "Descubra novas áreas do site!",
        content: "Explore novas páginas e funcionalidades do nosso site agora mesmo.",
        tag: "explorar"
    },
    {
        title: "Que tal descobrir novas artes?",
        content: "Confira novas criações e artes dos usuários da plataforma.",
        tag: "explorar"
    },
    {
        title: "Explore nossa comunidade!",
        content: "Veja o que a comunidade está criando e interaja com outros usuários.",
        tag: "explorar"
    },
    {
        title: "Você sabia? Temos uma seção de novidades no site.",
        content: "Fique por dentro de todas as novidades em nossa nova seção de atualizações!",
        tag: "explorar"
    },
    {
        title: "Já viu as publicações populares de hoje?",
        content: "Confira as postagens mais curtidas e comentadas do dia.",
        tag: "explorar"
    },
    {
        title: "Descubra o que nossos usuários estão criando!",
        content: "Navegue por publicações recentes e inspire-se.",
        tag: "explorar"
    },
    {
        title: "Explore o conteúdo recomendado para você!",
        content: "Acesse postagens que combinam com seus interesses.",
        tag: "explorar"
    },
    {
        title: "Participe das discussões em destaque!",
        content: "Interaja com outros usuários e compartilhe suas ideias.",
        tag: "explorar"
    },
    {
        title: "Conheça novos amigos na plataforma!",
        content: "Interaja e faça novas conexões enquanto explora.",
        tag: "explorar"
    },
    {
        title: "Descubra dicas e truques no nosso blog!",
        content: "Acesse conteúdos exclusivos e aprenda mais sobre o site.",
        tag: "explorar"
    },

    // Notificações de "publicacao"
    {
        title: "Já criou uma publicação hoje?",
        content: "Compartilhe suas ideias e criações agora mesmo!",
        tag: "publicacao"
    },
    {
        title: "Mostre sua criatividade: publique algo novo!",
        content: "Use o editor para criar e compartilhar suas ideias.",
        tag: "publicacao"
    },
    {
        title: "Sua próxima publicação está esperando!",
        content: "Publique suas criações e compartilhe com o mundo.",
        tag: "publicacao"
    },
    {
        title: "Volte a publicar no site!",
        content: "Não se esqueça de criar e compartilhar novas publicações.",
        tag: "publicacao"
    },
    {
        title: "Inspire-se: publique suas ideias!",
        content: "Sua criatividade pode fazer a diferença.",
        tag: "publicacao"
    },
    {
        title: "A comunidade está ansiosa pela sua nova publicação!",
        content: "Não deixe de compartilhar o que você ama fazer.",
        tag: "publicacao"
    },
    {
        title: "Você tem algo incrível para compartilhar?",
        content: "Publique e deixe sua marca na plataforma!",
        tag: "publicacao"
    },
    {
        title: "Ajude a comunidade: compartilhe seu conhecimento!",
        content: "Crie um post e ensine algo novo para os outros.",
        tag: "publicacao"
    },
    {
        title: "O que você está esperando? Crie uma nova publicação!",
        content: "Deixe sua criatividade fluir.",
        tag: "publicacao"
    },
    {
        title: "Compartilhe suas experiências com a comunidade!",
        content: "Cada publicação conta uma história única.",
        tag: "publicacao"
    },

    // Outras notificações criativas
    {
        title: "Dica do dia: não esqueça de explorar!",
        content: "Cada clique pode te levar a algo incrível.",
        tag: "explorar"
    },
    {
        title: "Participe de nosso desafio criativo!",
        content: "Mostre suas habilidades e inspire os outros.",
        tag: "concurso"
    },
    {
        title: "Crie um diário de bordo das suas criações!",
        content: "Registre sua jornada artística com publicações.",
        tag: "publicacao"
    },
    {
        title: "Você já conferiu as novas ferramentas do site?",
        content: "Aproveite para melhorar suas publicações.",
        tag: "explorar"
    },
    {
        title: "Dê uma olhada nas novas categorias de publicações!",
        content: "Explore novos temas e compartilhe seu talento.",
        tag: "explorar"
    },
    {
        title: "Junte-se ao nosso grupo de criadores!",
        content: "Conecte-se com pessoas que compartilham suas paixões.",
        tag: "explorar"
    },
    {
        title: "Dica: use hashtags para aumentar seu alcance!",
        content: "As tags podem ajudar mais pessoas a ver suas criações.",
        tag: "publicacao"
    },
    {
        title: "Não se esqueça de seguir seus criadores favoritos!",
        content: "Fique por dentro das novidades deles.",
        tag: "explorar"
    },
    {
        title: "Você está a um clique de criar algo incrível!",
        content: "Aproveite o editor e deixe sua criatividade brilhar.",
        tag: "publicacao"
    },
    {
        title: "O que você gostaria de ver mais no site?",
        content: "Diga-nos e ajude a melhorar a experiência!",
        tag: "explorar"
    },
    {
        title: "Participe da nossa enquete sobre novos recursos!",
        content: "Sua opinião é muito importante para nós.",
        tag: "explorar"
    },
    {
        title: "Explore a galeria de arte dos usuários!",
        content: "Veja o que outros criadores estão produzindo.",
        tag: "explorar"
    },
    {
        title: "Aumente sua visibilidade publicando mais!",
        content: "Cada publicação é uma oportunidade de brilhar.",
        tag: "publicacao"
    },
    {
        title: "Fique por dentro dos eventos da comunidade!",
        content: "Participe e compartilhe suas experiências.",
        tag: "explorar"
    },
    {
        title: "Que tal uma série de publicações sobre seus hobbies?",
        content: "Compartilhe suas paixões com o mundo.",
        tag: "publicacao"
    },
    {
        title: "A comunidade ama novos talentos! Mostre o seu!",
        content: "Publique e faça novos amigos.",
        tag: "publicacao"
    },
    {
        title: "Descubra novas formas de criar conteúdo!",
        content: "A criatividade não tem limites.",
        tag: "explorar"
    },
    {
        title: "Aproveite para revisar suas publicações antigas!",
        content: "Você pode atualizá-las e trazê-las de volta.",
        tag: "publicacao"
    },
    {
        title: "Siga as tendências do momento e publique!",
        content: "Mantenha-se atualizado e inspire outros.",
        tag: "publicacao"
    },
    {
        title: "Dê vida a novas ideias: publique hoje mesmo!",
        content: "Sua voz é única e merece ser ouvida.",
        tag: "publicacao"
    },
    {
        title: "Não perca os lançamentos de novos artistas!",
        content: "Fique atento e descubra novos talentos.",
        tag: "explorar"
    },
    {
        title: "Participe das discussões sobre novas tendências!",
        content: "Ajude a moldar o futuro da nossa comunidade.",
        tag: "explorar"
    },
    {
        title: "Faça parte da história: publique suas experiências!",
        content: "Seu ponto de vista é importante.",
        tag: "publicacao"
    },
    {
        title: "Venha conhecer nossos novos recursos!",
        content: "Estamos sempre inovando para você.",
        tag: "explorar"
    },
    {
        title: "Transforme suas ideias em publicações impactantes!",
        content: "Compartilhe sua mensagem com o mundo.",
        tag: "publicacao"
    },
    {
        title: "Acompanhe nossas redes sociais para mais novidades!",
        content: "Fique por dentro de tudo o que acontece.",
        tag: "explorar"
    },
    {
        title: "Oportunidade de brilhar: publique sua história!",
        content: "Deixe sua marca na comunidade.",
        tag: "publicacao"
    },
    {
        title: "Explore temas atuais nas publicações!",
        content: "Contribua com sua perspectiva.",
        tag: "publicacao"
    },
    {
        title: "Descubra novos formatos de conteúdo!",
        content: "Inove na sua próxima publicação.",
        tag: "explorar"
    },
    {
        title: "Você está pronto para criar algo incrível?",
        content: "Inicie uma nova jornada criativa agora!",
        tag: "publicacao"
    },
    {
        title: "Fique por dentro das novidades do nosso site!",
        content: "Novos recursos estão sempre surgindo.",
        tag: "explorar"
    },
    {
        title: "Aumente sua interatividade: publique hoje!",
        content: "Seja ouvido e participe das conversas.",
        tag: "publicacao"
    },
    {
        title: "O que você gostaria de ver no concurso deste mês?",
        content: "Dê sua opinião e participe da mudança!",
        tag: "concurso"
    },
    {
        title: "Desafie seus limites e participe do nosso concurso!",
        content: "Aposte na sua criatividade e surpreenda-se.",
        tag: "concurso"
    },
    {
        title: "Seja um dos primeiros a participar do nosso novo concurso!",
        content: "As inscrições estão abertas, não fique de fora!",
        tag: "concurso"
    },
    {
        title: "Explore e compartilhe suas descobertas!",
        content: "A cada clique, uma nova aventura te espera.",
        tag: "explorar"
    },
    {
        title: "Acompanhe as novas publicações e comente!",
        content: "Interagir é fundamental na nossa comunidade.",
        tag: "explorar"
    },
    {
        title: "Você já ajudou outro usuário hoje?",
        content: "Compartilhe suas dicas e fortaleça a comunidade.",
        tag: "explorar"
    },
    {
        title: "A sua próxima ideia pode ser a próxima sensação!",
        content: "Publique e compartilhe com todos.",
        tag: "publicacao"
    },
    {
        title: "O que você acha de uma competição amistosa?",
        content: "Traga suas melhores ideias e participe!",
        tag: "concurso"
    },
    {
        title: "Estamos ansiosos para ver o que você cria!",
        content: "Não tenha medo de se expressar.",
        tag: "publicacao"
    },
    {
        title: "Que tal interagir mais na plataforma?",
        content: "Comente, curta e compartilhe suas opiniões.",
        tag: "explorar"
    },
    {
        title: "Encontre sua inspiração em novas publicações!",
        content: "O novo pode te surpreender.",
        tag: "explorar"
    },
    {
        title: "Uma nova jornada criativa começa aqui!",
        content: "Publique e descubra a sua voz.",
        tag: "publicacao"
    },
    {
        title: "Estamos sempre em busca de novas ideias!",
        content: "Traga suas sugestões e participe do nosso crescimento.",
        tag: "explorar"
    },
    {
        title: "Ajude a moldar o futuro da plataforma!",
        content: "Seu feedback é sempre bem-vindo.",
        tag: "explorar"
    },
    {
        title: "Participe da nossa próxima live sobre criatividade!",
        content: "Descubra dicas e truques com especialistas.",
        tag: "explorar"
    },
    {
        title: "Pronto para a próxima grande ideia? Publique agora!",
        content: "A hora é agora!",
        tag: "publicacao"
    },
    {
        title: "A criatividade não tem limites: mostre a sua!",
        content: "O mundo precisa da sua expressão.",
        tag: "publicacao"
    },
    {
        title: "Participe de nosso concurso de ideias!",
        content: "Desafie-se e vença!",
        tag: "concurso"
    },
    {
        title: "Queremos ouvir você: compartilhe suas histórias!",
        content: "Sua voz é importante para nós.",
        tag: "publicacao"
    },
    {
        title: "Que tal seguir novas páginas inspiradoras?",
        content: "Descubra novos conteúdos e conecte-se!",
        tag: "explorar"
    },
    {
        title: "Dê vida a suas criações com novas publicações!",
        content: "Deixe sua marca e inspire os outros.",
        tag: "publicacao"
    },
    {
        title: "Estamos curiosos sobre o que você tem a dizer!",
        content: "Publique suas opiniões e ideias.",
        tag: "publicacao"
    },
    {
        title: "Que tal fazer uma pausa e explorar novas páginas?",
        content: "Você pode se surpreender com o que encontra.",
        tag: "explorar"
    },
    {
        title: "Nosso concurso vai começar em breve!",
        content: "Prepare-se para mostrar seu talento!",
        tag: "concurso"
    },
    {
        title: "Não se esqueça de publicar suas experiências!",
        content: "Cada história conta.",
        tag: "publicacao"
    },
    {
        title: "Siga a tendência: publique algo novo hoje!",
        content: "Não perca a oportunidade de brilhar.",
        tag: "publicacao"
    },
    {
        title: "Dê uma chance ao desconhecido: explore!",
        content: "A cada clique, novas possibilidades.",
        tag: "explorar"
    },
    {
        title: "Junte-se à nossa comunidade de criadores!",
        content: "Aqui, sua voz é ouvida.",
        tag: "explorar"
    },
    {
        title: "Converse com artistas diretamente pelo chat!",
        content: "Entre em contato e troque ideias sobre suas criações.",
        tag: "chat"
    },
    {
        title: "Negocie suas ideias com artistas pelo chat!",
        content: "Uma ótima maneira de colaborar e criar juntos.",
        tag: "chat"
    },
    {
        title: "Aproveite nosso chat para discutir projetos!",
        content: "Converse sobre suas ideias com artistas talentosos.",
        tag: "chat"
    },
    {
        title: "O chat é o lugar ideal para trocar feedback!",
        content: "Obtenha opiniões e sugestões diretamente dos artistas.",
        tag: "chat"
    },
    {
        title: "Participe de discussões criativas no chat!",
        content: "Junte-se a artistas e compartilhe suas visões.",
        tag: "chat"
    },
    {
        title: "Seu artista favorito está online: converse já!",
        content: "Aproveite para fazer perguntas e discutir colaborações.",
        tag: "chat"
    },
    {
        title: "Negocie colaborações pelo chat em tempo real!",
        content: "Desenvolva ideias juntos e faça parcerias incríveis.",
        tag: "chat"
    },
    {
        title: "Use o chat para se conectar com novos talentos!",
        content: "Explore a criatividade de artistas e faça novas amizades.",
        tag: "chat"
    },
    {
        title: "Organize seu projeto via chat com artistas!",
        content: "Troque informações e alinhe suas ideias facilmente.",
        tag: "chat"
    },
    {
        title: "O chat é perfeito para brainstormings!",
        content: "Venha criar algo novo com artistas incríveis.",
        tag: "chat"
    },
    {
        title: "Dúvidas sobre seu projeto? Pergunte no chat!",
        content: "Os artistas estão prontos para ajudar com dicas.",
        tag: "chat"
    },
    {
        title: "Colabore em tempo real pelo chat!",
        content: "Junte forças com artistas e crie algo único.",
        tag: "chat"
    },
    {
        title: "Fique por dentro das novidades no chat!",
        content: "Converse e descubra o que os artistas estão criando.",
        tag: "chat"
    },
    {
        title: "O chat é a sua porta de entrada para colaborações!",
        content: "Faça contatos e comece a criar juntos.",
        tag: "chat"
    },
    {
        title: "Receba feedback instantâneo no chat!",
        content: "Artistas estão disponíveis para ajudar com suas ideias.",
        tag: "chat"
    },
    {
        title: "Encontre seu próximo parceiro criativo no chat!",
        content: "A colaboração começa com uma simples conversa.",
        tag: "chat"
    },
    {
        title: "Participe de desafios criativos no chat!",
        content: "Converse com artistas e participe de competições.",
        tag: "chat"
    },
    {
        title: "Converse sobre suas paixões artísticas no chat!",
        content: "Troque experiências e inspire-se com outros artistas.",
        tag: "chat"
    },
    {
        title: "Oportunidades de networking estão no chat!",
        content: "Amplie sua rede de contatos criativos.",
        tag: "chat"
    },
    {
        title: "Negocie suas ideias e projetos pelo chat!",
        content: "Facilite a comunicação e potencialize suas colaborações.",
        tag: "chat"
    },
    {
        title: "Converse sobre tendências e inovações no chat!",
        content: "Mantenha-se atualizado com o que está rolando no mundo artístico.",
        tag: "chat"
    }
];

function criaroIDdanone() {
    return 'notif_' + Math.random().toString(36).substr(2, 9);
}

function mandarANoti(message, corpo, icon) {
    //aq verifica as permissões de notificacao push
    if (Notification.permission === "granted") {
        new Notification(message,{
            body: corpo,
            icon: icon
        })
    } else if (Notification.permission !== "denied") {
        Notification.requestPermission().then(permission => {
            if (permission === "granted") {
                new Notification(message,{
                    body: corpo,
                    icon: icon
                })
            }
        })
    }
}

function salvarNotificacao(notification) {
    let notifications = JSON.parse(localStorage.getItem('notifications')) || [];
    notifications.push(notification);
    localStorage.setItem('notifications', JSON.stringify(notifications))
}

function loadNotificacao() {
    let notifications = JSON.parse(localStorage.getItem('notifications')) || [];
    const now = new Date();

    notifications.forEach(notification => {
        const notificationDate = new Date(notification.date);
        const diffDays = Math.floor((now - notificationDate) / (1000 * 60 * 60 * 24));

        if (diffDays < 60) {
            criarADIV__deNotificaao(notification);
        } else {
            deleteNotificacao(notification.id);
        }
    })
    verif_qtdNoti()
}


function criarADIV__deNotificaao(notification) {
    const container = document.getElementById('notifications-container')
    const notificationDiv = document.createElement('div')
    notificationDiv.classList.add('notification')
    notificationDiv.id = notification.id
    notificationDiv.style.border = notification.clicked ? 'var(--default_border)' : '2px solid rgba(0, 123, 255, 0.5)'

    const title = notification.title.length > 20 ? notification.title.substr(0, 20) + '...' : notification.title
    let paggina
    let frase
    let icon
    if (notification.tag === "concurso") {
        frase = 'Explorar'
        paggina = 'concurso-link_sidebar'
        icon = '<svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="1"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-dice-5"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z" /><circle cx="8.5" cy="8.5" r=".5" fill="currentColor" /><circle cx="15.5" cy="8.5" r=".5" fill="currentColor" /><circle cx="15.5" cy="15.5" r=".5" fill="currentColor" /><circle cx="8.5" cy="15.5" r=".5" fill="currentColor" /><circle cx="12" cy="12" r=".5" fill="currentColor" /></svg>'
    } else if (notification.tag === "explorar") {
        frase = 'Explorar'
        paggina = 'home-link_sidebar'
        icon = '<svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="1"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-brand-safari"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 16l2 -6l6 -2l-2 6l-6 2" /><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /></svg>'
    } else if (notification.tag === "publicacao") {
        frase = 'Criar publicação'
        paggina = 'criarPubli-link_sidebar'
        icon = '<svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="1"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-square-plus"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 12h6" /><path d="M12 9v6" /><path d="M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z" /></svg>'
    } else if (notification.tag === "chat") {
        frase = 'Vamos lá!'
        paggina = 'superChat_goout'
        icon = '<svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="1.5"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-messages"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M21 14l-3 -3h-7a1 1 0 0 1 -1 -1v-6a1 1 0 0 1 1 -1h9a1 1 0 0 1 1 1v10" /><path d="M14 15v2a1 1 0 0 1 -1 1h-7l-3 3v-10a1 1 0 0 1 1 -1h2" /></svg>'
    }
  
    
    notificationDiv.innerHTML = `
        <div class="dropdown">
            <a href="#" class="notification-link dropdown-toggle" id="dropdownMenuButton${notification.id}" data-bs-toggle="dropdown" aria-expanded="false">
                <div class="notification-content">
                    <div class="notification-header">
                        <span class="notification-title">${title}</span>
                        <span class="notification-time">${datahora_noti(new Date(notification.date))}</span>
                    </div>
                    <div class="notification-delete">
                        <button class="delete-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-trash">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                                <path d="M4 7l16 0" />
                                <path d="M10 11l0 6" />
                                <path d="M14 11l0 6" />
                                <path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" />
                                <path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" />
                            </svg>
                        </button>
                    </div>
                </div>
            </a>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton${notification.id}">
                <li><strong>${notification.title}</strong></li>
                <li>${notification.content}</li>
                <li><a href="#" paggina="${paggina}" onclick="goToPaginacerta(this)" class="btn btn-primary containerDirectNOTI__link">${icon}<span>${frase}</span></a></li>
            </ul>
        </div>
    `;

    notificationDiv.querySelector('.delete-btn').addEventListener('click', function(event) {
        event.preventDefault();
        deleteNotificacao(notification.id);
        notificationDiv.remove();
    });

    notificationDiv.querySelector('.notification-link').addEventListener('click', function() {
        notification.clicked = true;
        updateNotificacao(notification);
        notificationDiv.style.border = 'var(--default_border)';
    });

    container.appendChild(notificationDiv);
}

function deleteNotificacao(id) {
    let notifications = JSON.parse(localStorage.getItem('notifications')) || [];
    notifications = notifications.filter(notification => notification.id !== id);
    localStorage.setItem('notifications', JSON.stringify(notifications))
    verif_qtdNoti()
}

function updateNotificacao(updatedNotification) {
    let notifications = JSON.parse(localStorage.getItem('notifications')) || [];
    notifications = notifications.map(notification => notification.id === updatedNotification.id ? updatedNotification : notification);
    localStorage.setItem('notifications', JSON.stringify(notifications))
    verif_qtdNoti()
}

function datahora_noti(date) {
    const now = new Date();
    const diffMs = now - date;
    const diffMinutes = Math.floor(diffMs / (1000 * 60));
    const diffHours = Math.floor(diffMs / (1000 * 60 * 60));
    const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));

    if (diffMinutes < 1) {
        return "agora"
    } else if (diffDays === 1) {
        return "ontem";
    } else if (diffDays > 1) {
        const day = String(date.getDate()).padStart(2, '0');
        const month = String(date.getMonth() + 1).padStart(2, '0')
        return `${day}/${month}`
    } else if (diffHours >= 1) {
        return `${diffHours}h atrás`;
    } else {
        return `${diffMinutes}min atrás`;
    }
}

function criarNotificacao() {
    const now = new Date();
    const randomMessage = msg__notificacoes[Math.floor(Math.random() * msg__notificacoes.length)];
    const notification = {
        id: criaroIDdanone(),
        title: randomMessage.title,
        content: randomMessage.content,
        icon: "assets/media/logo/4.png",
        tag: randomMessage.tag,
        date: now,
        clicked: false
    }

    salvarNotificacao(notification);
    criarADIV__deNotificaao(notification);
    mandarANoti(randomMessage.title,notification.content,notification.icon);
    verif_qtdNoti()
}

function removerNotificacoesAntigas() {
    const now = Date.now();
    let notifications = JSON.parse(localStorage.getItem('notifications')) || [];
    notifications = notifications.filter(notification => {
        const notificationTime = new Date(notification.date).getTime();
        return now - notificationTime < 60 * 24 * 60 * 60 * 1000; // 60 dias
    });
    localStorage.setItem('notifications', JSON.stringify(notifications));

    document.getElementById('notifications-container').innerHTML = '';
    loadNotificacao()
    verif_qtdNoti()
}

function scheduleNotifications() {
    const lastNotificationTime = localStorage.getItem('lastNotificationTime');
    const now = Date.now();
    const tenDays = 10 * 24 * 60 * 60 * 1000
    
     if (!lastNotificationTime) {
        criarNotificacao()
        localStorage.setItem('lastNotificationTime', now)
    } else if (now - lastNotificationTime >= tenDays) {
        criarNotificacao()
        localStorage.setItem('lastNotificationTime', now)
    } 
}

document.addEventListener('DOMContentLoaded', () => {
    loadNotificacao();
    verif_qtdNoti()
    scheduleNotifications()
    removerNotificacoesAntigas();
});
function verif_qtdNoti() {
    const container = document.getElementById('notifications-container');
    const notificationElements = container.children;
    let blueBorderCount = 0;

    for (let i = 0; i < notificationElements.length; i++) {
        const style = window.getComputedStyle(notificationElements[i]);
        if (style.border === '2px solid rgba(0, 123, 255, 0.5)') {
            blueBorderCount++;
        }
    }

    const classNumberDataNoti = document.querySelector('#classNumberData__noti');

    if (blueBorderCount > 0) {
        classNumberDataNoti.style.display = 'block';
    } else {
        classNumberDataNoti.style.display = 'none';
    }
}
setInterval(removerNotificacoesAntigas, 24 * 60 * 60 * 1000);
